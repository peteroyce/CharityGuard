Backend models (backend/models/):
- IRSOrg.js
- Nonprofit.js
- Transaction.js
- User.js

Model summaries:
- IRSOrg: { ein, name, street, city, state, zip, nteeCode, deductibility, status, classification, foundation, subsection, affiliation, ruling, activity, organization, sortName, lastUpdated } (timestamps enabled)
- Nonprofit: { name, registrationNumber (unique), address, verificationStatus, trustLevel, whitelistedAt, whitelistReason, trustScore, verifiedAt, verifiedBy, verificationDocuments [ { type, url, uploadedAt } ], contactEmail, contactPhone, website, category, description, establishedYear, donationCount, totalDonationsReceived, averageDonationAmount, lastDonationDate, riskFlags [ { type, reason, flaggedAt, flaggedBy, resolved } ], fraudScore, taxExemptStatus, taxExemptNumber, complianceNotes, isActive, lastUpdated } (timestamps; methods: updateTrustScore, addRiskFlag, updateDonationMetrics; statics: findTrusted, findHighRisk, getVerificationStats)
- Transaction: { nonprofit (ObjectId->Nonprofit), nonprofitName, amount, donorWallet, description, fraudScore, status ['completed','flagged','under_review','blocked'], date } (timestamps; indexes: {nonprofit:1,date:-1} and {fraudScore:-1,status:1})
- User: { googleId (unique), email (unique, lowercase), name, picture, donations [ { charityId(ObjectId->Nonprofit), amount, date, paymentIntentId, status ['pending','completed','failed','refunded'] } ], isActive, lastLoginAt } (timestamps)

Backend routes (backend/routes/):
- api.js
- nonprofits.js
- transactions.js

Key endpoints:
- api.js
  - POST /api/auth/google
  - GET  /api/auth/verify
  - POST /api/auth/logout
  - GET  /api/auth/profile
  - POST /api/payments/create-intent
  - POST /api/payments/confirm
  - GET  /api/collections                (lists Mongo collections and counts)
  - GET  /api/collections/:name/schema   (infers schema from samples)
  - GET  /api/database/stats
  - GET  /api/debug
  - GET  /api/status
  - GET  /api/health
  - Subroutes mounted:
    - /api/nonprofits -> nonprofits.js
    - /api/transactions -> transactions.js

- nonprofits.js
  - GET /api/nonprofits/search (queries 'irsorgs' collection with optional q, limit, skip)
  - GET /api/nonprofits/stats  (returns counts from 'irsorgs')

- transactions.js
  - GET  /api/transactions           (list with pagination; controller-backed)
  - POST /api/transactions           (process transaction; validation + rate limit)
  - GET  /api/transactions/stats
  - GET  /api/transactions/flagged
  - GET  /api/transactions/:id
  - PUT  /api/transactions/:id/status

IRS data files (backend/data/irs/):
- eo_pr.csv
- eo_xx.csv
- eo1.csv
- eo2.csv
- eo3.csv
- eo4.csv

IRS nonprofit data structure:
- Stored in CSV files listed above. Loaded into MongoDB collection named 'irsorgs' (as referenced in nonprofits routes). Fields represented in model IRSOrg.js include EIN, organization name, address parts, NTEE and classification metadata, deductibility and status, foundation/subsection/affiliation, ruling/activity/organization, plus timestamps.

Database connection:
- backend/config/db.js connects via mongoose.connect(process.env.MONGO_URI) and logs connection status.

Existing MongoDB collections (via code references):
- Mongoose models imply collections: 'irsorgs', 'nonprofits', 'transactions', 'users'.
- api.js exposes GET /api/collections to list actual collections in the connected DB at runtime.

